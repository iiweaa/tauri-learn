# ç¬¬1è¯¾ï¼šTAURIæ¡†æ¶ç®€ä»‹ä¸ç¯å¢ƒæ­å»º

## è¯¾ç¨‹ä¿¡æ¯

- **è¯¾ç¨‹ç¼–å·**ï¼šç¬¬1è¯¾
- **è¯¾ç¨‹æ ‡é¢˜**ï¼šTAURIæ¡†æ¶ç®€ä»‹ä¸ç¯å¢ƒæ­å»º
- **å­¦ä¹ ç›®æ ‡**ï¼š
  - äº†è§£TAURIæ¡†æ¶çš„åŸºæœ¬æ¦‚å¿µå’Œç‰¹ç‚¹
  - ç†è§£TAURIä¸å…¶ä»–æ¡Œé¢åº”ç”¨æ¡†æ¶çš„åŒºåˆ«
  - æŒæ¡TAURIå¼€å‘ç¯å¢ƒçš„æ­å»ºæ–¹æ³•
  - èƒ½å¤Ÿåˆ›å»ºå¹¶è¿è¡Œç¬¬ä¸€ä¸ªTAURIåº”ç”¨
- **é¢„è®¡å­¦ä¹ æ—¶é—´**ï¼š2-3å°æ—¶
- **å‰ç½®çŸ¥è¯†è¦æ±‚**ï¼š
  - ç†Ÿæ‚‰JavaScript/TypeScriptåŸºç¡€è¯­æ³•
  - äº†è§£å‰ç«¯æ¡†æ¶ï¼ˆReact/Vue/Svelteç­‰ï¼‰çš„åŸºæœ¬ä½¿ç”¨
  - ç†Ÿæ‚‰å‘½ä»¤è¡Œæ“ä½œ
  - äº†è§£Node.jså’Œnpm/yarnåŒ…ç®¡ç†å™¨

## ç†è®ºè®²è§£

### ä»€ä¹ˆæ˜¯TAURIï¼Ÿ

TAURIæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨WebæŠ€æœ¯ï¼ˆHTMLã€CSSã€JavaScriptï¼‰æ¥åˆ›å»ºè½»é‡çº§ã€å®‰å…¨ä¸”é«˜æ€§èƒ½çš„æ¡Œé¢åº”ç”¨ã€‚

### TAURIçš„æ ¸å¿ƒç‰¹ç‚¹

1. **è½»é‡çº§**ï¼šç›¸æ¯”Electronï¼ŒTAURIç”Ÿæˆçš„åº”ç”¨ç¨‹åºä½“ç§¯æ›´å°ï¼Œå†…å­˜å ç”¨æ›´ä½
2. **å®‰å…¨æ€§**ï¼šå†…ç½®å®‰å…¨æœºåˆ¶ï¼Œéœ€è¦æ˜ç¡®å£°æ˜æ‰èƒ½è®¿é—®ç³»ç»ŸAPI
3. **è·¨å¹³å°**ï¼šæ”¯æŒWindowsã€macOSå’ŒLinuxä¸‰å¤§ä¸»æµæ“ä½œç³»ç»Ÿ
4. **ç°ä»£åŒ–**ï¼šä½¿ç”¨Rustä½œä¸ºåç«¯ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½å’Œå®‰å…¨æ€§
5. **çµæ´»æ€§**ï¼šæ”¯æŒå¤šç§å‰ç«¯æ¡†æ¶ï¼ˆReactã€Vueã€Svelteã€Vanilla JSç­‰ï¼‰

### TAURI vs Electron

| ç‰¹æ€§ | TAURI | Electron |
|------|-------|----------|
| åç«¯è¯­è¨€ | Rust | Node.js |
| åº”ç”¨ä½“ç§¯ | è¾ƒå°ï¼ˆé€šå¸¸<10MBï¼‰ | è¾ƒå¤§ï¼ˆé€šå¸¸>100MBï¼‰ |
| å†…å­˜å ç”¨ | è¾ƒä½ | è¾ƒé«˜ |
| å®‰å…¨æ€§ | é»˜è®¤å®‰å…¨ï¼Œéœ€è¦æ˜¾å¼æƒé™ | éœ€è¦æ‰‹åŠ¨é…ç½®å®‰å…¨ç­–ç•¥ |
| æ€§èƒ½ | ä¼˜ç§€ | è‰¯å¥½ |
| ç”Ÿæ€ç³»ç»Ÿ | æ­£åœ¨å¿«é€Ÿå‘å±• | æˆç†Ÿå®Œå–„ |

### TAURIæ¶æ„

TAURIé‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ï¼š

- **å‰ç«¯ï¼ˆFrontendï¼‰**ï¼šä½¿ç”¨WebæŠ€æœ¯æ„å»ºç”¨æˆ·ç•Œé¢
- **åç«¯ï¼ˆBackendï¼‰**ï¼šä½¿ç”¨Rustç¼–å†™ï¼Œæä¾›ç³»ç»ŸAPIè®¿é—®èƒ½åŠ›
- **é€šä¿¡å±‚ï¼ˆIPCï¼‰**ï¼šå‰ç«¯å’Œåç«¯é€šè¿‡å®‰å…¨çš„è¿›ç¨‹é—´é€šä¿¡è¿›è¡Œäº¤äº’

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webå‰ç«¯å±‚     â”‚  (HTML/CSS/JS)
â”‚  (React/Vueç­‰)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ IPCé€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TAURIæ ¸å¿ƒå±‚   â”‚  (Rust)
â”‚   (ç³»ç»ŸAPI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ“ä½œç³»ç»Ÿ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“

1. **TAURI CLI**ï¼šå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆ›å»ºã€å¼€å‘å’Œæ„å»ºTAURIåº”ç”¨
2. **tauri.conf.json**ï¼šTAURIåº”ç”¨çš„é…ç½®æ–‡ä»¶
3. **src-tauriç›®å½•**ï¼šå­˜æ”¾Ruståç«¯ä»£ç 
4. **å‰ç«¯ç›®å½•**ï¼šå­˜æ”¾Webå‰ç«¯ä»£ç ï¼ˆé€šå¸¸ä½¿ç”¨Viteç­‰æ„å»ºå·¥å…·ï¼‰

## å®è·µæ“ä½œ

### æ­¥éª¤1ï¼šç¯å¢ƒå‡†å¤‡

#### 1.1 å®‰è£…Rust

TAURIéœ€è¦Rustç¯å¢ƒï¼Œé¦–å…ˆå®‰è£…Rustï¼š

```bash
# åœ¨Linux/macOSä¸Šå®‰è£…Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# åœ¨Windowsä¸Šï¼Œä¸‹è½½å¹¶è¿è¡Œ rustup-init.exe
# ä¸‹è½½åœ°å€ï¼šhttps://rustup.rs/

# éªŒè¯å®‰è£…
rustc --version
cargo --version
```

#### 1.2 å®‰è£…ç³»ç»Ÿä¾èµ–

**Linux (Ubuntu/Debian):**
```bash
sudo apt update
sudo apt install libwebkit2gtk-4.0-dev \
    build-essential \
    curl \
    wget \
    libssl-dev \
    libgtk-3-dev \
    libayatana-appindicator3-dev \
    librsvg2-dev
```

**macOS:**
```bash
# éœ€è¦å®‰è£…Xcode Command Line Tools
xcode-select --install
```

**Windows:**
- éœ€è¦å®‰è£…Microsoft C++ Build Tools
- ä¸‹è½½åœ°å€ï¼šhttps://visualstudio.microsoft.com/visual-cpp-build-tools/

#### 1.3 å®‰è£…Node.js

ç¡®ä¿å·²å®‰è£…Node.jsï¼ˆæ¨èç‰ˆæœ¬18æˆ–æ›´é«˜ï¼‰ï¼š

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version
npm --version

# å¦‚æœæœªå®‰è£…ï¼Œè®¿é—® https://nodejs.org/ ä¸‹è½½å®‰è£…
```

### æ­¥éª¤2ï¼šåˆ›å»ºTAURIé¡¹ç›®

#### 2.1 ä½¿ç”¨create-tauri-appåˆ›å»ºé¡¹ç›®

```bash
# ä½¿ç”¨npm
npm create tauri-app@latest

# æˆ–ä½¿ç”¨yarn
yarn create tauri-app

# æˆ–ä½¿ç”¨pnpm
pnpm create tauri-app
```

åˆ›å»ºè¿‡ç¨‹ä¸­ä¼šæç¤ºé€‰æ‹©ï¼š
- **é¡¹ç›®åç§°**ï¼šä¾‹å¦‚ `my-tauri-app`
- **å‰ç«¯æ¡†æ¶**ï¼šé€‰æ‹©Reactã€Vueã€Svelteæˆ–Vanilla
- **åŒ…ç®¡ç†å™¨**ï¼šé€‰æ‹©npmã€yarnæˆ–pnpm
- **TypeScript**ï¼šæ˜¯å¦ä½¿ç”¨TypeScript

#### 2.2 é¡¹ç›®ç»“æ„è§£æ

åˆ›å»ºå®Œæˆåï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```
my-tauri-app/
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.jsx           # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src-tauri/             # Ruståç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main.rs        # Rustä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ Cargo.toml         # Rustä¾èµ–é…ç½®
â”‚   â””â”€â”€ tauri.conf.json    # TAURIé…ç½®æ–‡ä»¶
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ package.json            # Node.jsä¾èµ–é…ç½®
â””â”€â”€ vite.config.js          # Viteæ„å»ºé…ç½®
```

### æ­¥éª¤3ï¼šè¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-tauri-app

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run tauri dev
```

é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½Rustä¾èµ–ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚è¿è¡ŒæˆåŠŸåï¼Œä¼šè‡ªåŠ¨æ‰“å¼€æ¡Œé¢åº”ç”¨çª—å£ã€‚

### æ­¥éª¤4ï¼šä¿®æ”¹åº”ç”¨é…ç½®

ç¼–è¾‘ `src-tauri/tauri.conf.json` æ–‡ä»¶ï¼Œå¯ä»¥é…ç½®åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼š

```json
{
  "build": {
    "beforeDevCommand": "npm run dev",
    "beforeBuildCommand": "npm run build",
    "devPath": "http://localhost:1420",
    "distDir": "../dist"
  },
  "package": {
    "productName": "æˆ‘çš„TAURIåº”ç”¨",
    "version": "0.1.0"
  },
  "tauri": {
    "allowlist": {
      "all": false,
      "shell": {
        "all": false,
        "open": true
      }
    },
    "windows": [
      {
        "fullscreen": false,
        "resizable": true,
        "title": "æˆ‘çš„TAURIåº”ç”¨",
        "width": 800,
        "height": 600
      }
    ]
  }
}
```

### æ­¥éª¤5ï¼šç¼–å†™ç¬¬ä¸€ä¸ªåŠŸèƒ½

è®©æˆ‘ä»¬åœ¨å‰ç«¯æ·»åŠ ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œè°ƒç”¨TAURIçš„APIï¼š

#### 5.1 å®‰è£…TAURI API

```bash
npm install @tauri-apps/api
```

#### 5.2 ä¿®æ”¹å‰ç«¯ä»£ç 

ç¼–è¾‘ `src/App.jsx`ï¼š

```jsx
import { useState } from 'react'
import { invoke } from '@tauri-apps/api/tauri'
import './App.css'

function App() {
  const [greetMsg, setGreetMsg] = useState('')
  const [name, setName] = useState('')

  async function greet() {
    // è°ƒç”¨Ruståç«¯çš„greetå‡½æ•°
    setGreetMsg(await invoke('greet', { name }))
  }

  return (
    <div className="container">
      <h1>æ¬¢è¿ä½¿ç”¨TAURIï¼</h1>
      
      <div className="row">
        <input
          id="greet-input"
          onChange={(e) => setName(e.currentTarget.value)}
          placeholder="è¾“å…¥ä½ çš„åå­—..."
        />
        <button type="button" onClick={() => greet()}>
          æ‰“æ‹›å‘¼
        </button>
      </div>

      <p>{greetMsg}</p>
    </div>
  )
}

export default App
```

#### 5.3 ä¿®æ”¹Ruståç«¯ä»£ç 

ç¼–è¾‘ `src-tauri/src/main.rs`ï¼š

```rust
// Prevents additional console window on Windows in release, DO NOT REMOVE!!
#![cfg_attr(not(debug_assertions), windows_subsystem = "windows")]

// å®šä¹‰ä¸€ä¸ªgreetå‘½ä»¤ï¼Œå‰ç«¯å¯ä»¥è°ƒç”¨
#[tauri::command]
fn greet(name: &str) -> String {
    format!("ä½ å¥½, {}! æ¬¢è¿ä½¿ç”¨TAURI!", name)
}

fn main() {
    tauri::Builder::default()
        .invoke_handler(tauri::generate_handler![greet])
        .run(tauri::generate_context!())
        .expect("è¿è¡ŒTAURIåº”ç”¨æ—¶å‡ºé”™");
}
```

#### 5.4 æ›´æ–°Cargo.toml

ç¡®ä¿ `src-tauri/Cargo.toml` åŒ…å«å¿…è¦çš„ä¾èµ–ï¼š

```toml
[package]
name = "my-tauri-app"
version = "0.1.0"
description = "ä¸€ä¸ªTAURIåº”ç”¨"
authors = ["you"]
license = ""
repository = ""
edition = "2021"

[build-dependencies]
tauri-build = { version = "1.0", features = [] }

[dependencies]
tauri = { version = "1.0", features = [] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

[features]
# é»˜è®¤å¯ç”¨è‡ªå®šä¹‰åè®®
custom-protocol = ["tauri/custom-protocol"]
```

### æ­¥éª¤6ï¼šæµ‹è¯•åº”ç”¨

1. ä¿å­˜æ‰€æœ‰æ–‡ä»¶
2. å¼€å‘æœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘
3. åœ¨åº”ç”¨çª—å£ä¸­è¾“å…¥åå­—ï¼Œç‚¹å‡»"æ‰“æ‹›å‘¼"æŒ‰é’®
4. åº”è¯¥èƒ½çœ‹åˆ°é—®å€™æ¶ˆæ¯

## ç»ƒä¹ ä»»åŠ¡

### åŸºç¡€ç»ƒä¹ ï¼ˆå¿…åšï¼‰

1. **ä¿®æ”¹çª—å£æ ‡é¢˜å’Œå¤§å°**
   - åœ¨ `tauri.conf.json` ä¸­ä¿®æ”¹çª—å£æ ‡é¢˜ä¸º"æˆ‘çš„ç¬¬ä¸€ä¸ªTAURIåº”ç”¨"
   - å°†çª—å£å¤§å°æ”¹ä¸º 1000x700

2. **æ·»åŠ æ–°çš„Rustå‘½ä»¤**
   - åˆ›å»ºä¸€ä¸ª `calculate` å‘½ä»¤ï¼Œæ¥æ”¶ä¸¤ä¸ªæ•°å­—ï¼Œè¿”å›å®ƒä»¬çš„å’Œ
   - åœ¨å‰ç«¯è°ƒç”¨è¿™ä¸ªå‘½ä»¤å¹¶æ˜¾ç¤ºç»“æœ

3. **ç¾åŒ–ç•Œé¢**
   - ä½¿ç”¨CSSç¾åŒ–åº”ç”¨ç•Œé¢
   - æ·»åŠ ä¸€äº›åŸºæœ¬çš„æ ·å¼å’Œå¸ƒå±€

### è¿›é˜¶æŒ‘æˆ˜ï¼ˆé€‰åšï¼‰

1. **åˆ›å»ºå¤šä¸ªçª—å£**
   - åœ¨ `tauri.conf.json` ä¸­é…ç½®å¤šä¸ªçª—å£
   - å®ç°çª—å£é—´çš„é€šä¿¡

2. **æ·»åŠ é”™è¯¯å¤„ç†**
   - åœ¨Rustå‡½æ•°ä¸­æ·»åŠ é”™è¯¯å¤„ç†
   - åœ¨å‰ç«¯æ•è·å¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

3. **ä½¿ç”¨TypeScript**
   - å°†é¡¹ç›®è¿ç§»åˆ°TypeScript
   - ä¸ºTAURIå‘½ä»¤æ·»åŠ ç±»å‹å®šä¹‰

### æ€è€ƒé¢˜

1. TAURIç›¸æ¯”Electronçš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥é€‰æ‹©TAURIï¼Ÿ
2. ä¸ºä»€ä¹ˆTAURIä½¿ç”¨Rustè€Œä¸æ˜¯Node.jsä½œä¸ºåç«¯ï¼Ÿ
3. IPCé€šä¿¡æ˜¯å¦‚ä½•ä¿è¯å®‰å…¨æ€§çš„ï¼Ÿ
4. å¦‚ä½•ç†è§£TAURIçš„"allowlist"æœºåˆ¶ï¼Ÿ

## æ€»ç»“ä¸å›é¡¾

### æœ¬èŠ‚é‡ç‚¹å›é¡¾

1. **TAURIæ¡†æ¶ç‰¹ç‚¹**ï¼š
   - è½»é‡çº§ã€å®‰å…¨ã€è·¨å¹³å°
   - ä½¿ç”¨Ruståç«¯ï¼ŒWebå‰ç«¯
   - é€šè¿‡IPCè¿›è¡Œå‰åç«¯é€šä¿¡

2. **ç¯å¢ƒæ­å»º**ï¼š
   - å®‰è£…Rustå·¥å…·é“¾
   - å®‰è£…ç³»ç»Ÿä¾èµ–
   - å®‰è£…Node.jså’ŒåŒ…ç®¡ç†å™¨

3. **é¡¹ç›®åˆ›å»º**ï¼š
   - ä½¿ç”¨ `create-tauri-app` åˆ›å»ºé¡¹ç›®
   - ç†è§£é¡¹ç›®ç»“æ„
   - é…ç½® `tauri.conf.json`

4. **åŸºç¡€å¼€å‘**ï¼š
   - åˆ›å»ºRustå‘½ä»¤
   - åœ¨å‰ç«¯è°ƒç”¨TAURI API
   - è¿è¡Œå’Œæµ‹è¯•åº”ç”¨

### å¸¸è§é—®é¢˜è§£ç­”

**Q1: å®‰è£…Rustæ—¶é‡åˆ°ç½‘ç»œé—®é¢˜æ€ä¹ˆåŠï¼Ÿ**
A: å¯ä»¥é…ç½®Rusté•œåƒæºï¼Œç¼–è¾‘ `~/.cargo/config` æ–‡ä»¶ï¼Œæ·»åŠ å›½å†…é•œåƒæºã€‚

**Q2: å¼€å‘æ—¶åº”ç”¨çª—å£æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°ï¼Ÿ**
A: ç¡®ä¿å‰ç«¯å¼€å‘æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼Œæ£€æŸ¥ `tauri.conf.json` ä¸­çš„ `devPath` é…ç½®ã€‚

**Q3: å¦‚ä½•è°ƒè¯•Rustä»£ç ï¼Ÿ**
A: å¯ä»¥ä½¿ç”¨ `println!` å®è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œæˆ–è€…ä½¿ç”¨Rustçš„è°ƒè¯•å·¥å…·å¦‚ `gdb`ã€‚

**Q4: æ„å»ºåº”ç”¨æ—¶ä½“ç§¯å¾ˆå¤§ï¼Ÿ**
A: ç¡®ä¿ä½¿ç”¨releaseæ¨¡å¼æ„å»ºï¼š`npm run tauri build`ï¼Œè¿™ä¼šä¼˜åŒ–ä»£ç ä½“ç§¯ã€‚

**Q5: å¦‚ä½•æŸ¥çœ‹TAURIçš„æ—¥å¿—ï¼Ÿ**
A: åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ—¥å¿—ä¼šè¾“å‡ºåˆ°ç»ˆç«¯ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ `tauri::api::log` æ¨¡å—è®°å½•æ—¥å¿—ã€‚

### ä¸‹èŠ‚é¢„å‘Š

ä¸‹ä¸€èŠ‚è¯¾æˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ ï¼š
- **é¡¹ç›®ç»“æ„è§£æä¸åŸºç¡€é…ç½®**
  - è¯¦ç»†è§£æTAURIé¡¹ç›®çš„å„ä¸ªç›®å½•å’Œæ–‡ä»¶
  - æ·±å…¥ç†è§£ `tauri.conf.json` é…ç½®é¡¹
  - å­¦ä¹ å¦‚ä½•é…ç½®åº”ç”¨æƒé™å’Œå®‰å…¨ç­–ç•¥
  - æŒæ¡æ„å»ºé…ç½®å’Œæ‰“åŒ…é€‰é¡¹

---

**ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œéšæ—¶æé—®ã€‚** ğŸš€

